var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol==="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};function cloneObject(b){if(b==null||(typeof b==="undefined"?"undefined":_typeof(b))!="object"){return b}if(b instanceof Date){var g=new Date(b.getDate());return g}if(b instanceof Array){for(var g=[],h=0,d=b.length;h<d;h++){g[h]=b[h]}return g}if(b instanceof Object){g={};for(h in b){b.hasOwnProperty(h)&&(g[h]=cloneObject(b[h]))}return g}}mashiro_global.variables=new function(){this.has_bot_ui=false;this.isNight=false;this.skinSecter=false}();mashiro_global.ini=new function(){this.normalize=function(){lazyload();social_share();mashiro_global.post_list_show_animation.ini();copy_code_block();if(window.is_app){try{setTimeout(function(){mashiro_option.app_update(true)},10000)}catch(a){}}if($("div").hasClass("poem-wrap")){get_poem("#poem","#info")}$(function(){function c(){$("#banner_wave_1").css({left:"-236px"}).animate({left:"-1233px"},25000,"linear",c)}function b(){$("#banner_wave_2").css({left:"0px"}).animate({left:"-1009px"},60000,"linear",b)}if(screen&&screen.width>860){c();b()}if(navigator.userAgent.indexOf("AppleWebKit")!=-1){$("body").addClass("isWebKit")}hearthstone_deck_iframe()})}}();mashiro_global.lib=new function(){this.removeClass=function(c,b){var a=document.getElementById(c);if(a.classList){a.classList.remove(b)}else{a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}};this.addClass=function(c,b){var a=document.getElementById(c);if(a.classList){a.classList.add(b)}else{a.className+=" "+b}};this.hasClass=function(c,b){var a=document.getElementById(c);if(a.classList){var d=a.classList.contains(b)}else{var d=new RegExp("(^| )"+b+"( |$)","gi").test(a.className)}return d};this.toggleClass=function(f,d){var c=document.getElementById(f);if(c.classList){c.classList.toggle(d)}else{var b=c.className.split(" ");var a=b.indexOf(d);if(a>=0){b.splice(a,1)}else{b.push(d)}c.className=b.join(" ")}};this.saveFile=function(a,c){var b=new XMLHttpRequest();b.responseType="blob";b.onload=function(){var d=document.createElement("a");d.href=window.URL.createObjectURL(b.response);d.download=c;d.style.display="none";document.body.appendChild(d);d.click()};b.open("GET",a);b.send()}}();function setCookie(c,d,f){var a="";if(f){var b=new Date();b.setTime(b.getTime()+(f*24*60*60*1000));a="; expires="+b.toUTCString()}document.cookie=c+mashiro_option.cookie_version_control+"="+(d||"")+a+"; path=/"}function getCookie(b){var f=b+mashiro_option.cookie_version_control+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var g=a[d];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(f)==0){return g.substring(f.length,g.length)}}return null}function removeCookie(a){document.cookie=a+mashiro_option.cookie_version_control+"=; Max-Age=-99999999;"}function injectStyles(a){var b=$("<div />",{html:"&shy;<style>"+a+"</style>"}).appendTo("body")}function imgError(b,a){switch(a){case 1:if(b.src.includes("https://cn.gravatar.com/avatar")){b.src=b.src.replace("https://cn.gravatar.com/avatar/","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/gravatar.jpg")}else{b.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/default_avatar.jpg"}break;case 2:b.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/default_gavatar.jpg";break;case 3:b.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/image-404.png";break;default:b.src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/image-404.png"}}mashiro_global.post_list_show_animation=new function(){this.ini=function(a){$("article.post-list-thumb").each(function(d){if(a){var b=$(window).height()}else{if($(".headertop").hasClass("headertop-bar")){var b=0}else{var b=$(window).height()-300}}if(!mashiro_global.landing_at_home){b+=300}var c=$("article.post-list-thumb").eq(d).offset().top;if($(window).height()+$(window).scrollTop()>=c){$("article.post-list-thumb").eq(d).addClass("post-list-show")}$(window).scroll(function(){var f=$(window).scrollTop();if(f+b>=c&&f){$("article.post-list-thumb").eq(d).addClass("post-list-show")}})})}}();mashiro_global.font_control=new function(){this.change_font=function(){if($("body").hasClass("serif")){$("body").removeClass("serif");$(".control-btn-serif").removeClass("selected");$(".control-btn-sans-serif").addClass("selected");setCookie("font_family","sans-serif",30)}else{$("body").addClass("serif");$(".control-btn-serif").addClass("selected");$(".control-btn-sans-serif").removeClass("selected");setCookie("font_family","serif",30);if(document.body.clientWidth<=860){addComment.createButterbar("将从网络加载字体，流量请注意")}}};this.ini=function(){if(document.body.clientWidth>860){if(!getCookie("font_family")||getCookie("font_family")=="serif"){$("body").addClass("serif")}}if(getCookie("font_family")=="sans-serif"){$("body").removeClass("sans-serif");$(".control-btn-serif").removeClass("selected");$(".control-btn-sans-serif").addClass("selected")}}}();mashiro_global.font_control.ini();function code_highlight_style(){function a(g){var c={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",design:"by hojun"};var d=$("pre:eq("+g+")")[0].children[0].className;var h=d.substr(0,d.indexOf(" ")).replace("language-","");if(h.toLowerCase()=="hljs"){var h="text"}if(h.toLowerCase()=="js"){var h="javascript"}if(h.toLowerCase()=="md"){var h="markdown"}if(h.toLowerCase()=="py"){var h="python"}$("pre:eq("+g+")").addClass("highlight-wrap");for(var f in c){$("pre:eq("+g+")").attr(f,c[f])}$("pre:eq("+g+") code").attr("data-rel",h.toUpperCase())}$("pre code").each(function(c,d){hljs.highlightBlock(d)});for(var b=0;b<$("article pre").length;b++){a(b)}$("pre").on("click",function(c){if(c.target!==this){return}$(this).toggleClass("code-block-fullscreen");$("html").toggleClass("code-block-fullscreen-html-scroll")});hljs.initLineNumbersOnLoad()}try{code_highlight_style()}catch(e){}function copy_code_block(){$("pre code").each(function(b,c){$(c).attr({id:"hljs-"+b});$(this).after('<a class="copy-code" href="javascript:" data-clipboard-target="#hljs-'+b+'" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a>')});var a=new ClipboardJS(".copy-code")}function attach_image(){$("#upload-img-file").change(function(){if(this.files.length>10){addComment.createButterbar("每次上传上限为10张.<br>10 files max per request.");return 0}for(a=0;a<this.files.length;a++){if(this.files[a].size>=5242880){alert("图片上传大小限制为5 MB.\n5 MB max per file.\n\n「"+this.files[a].name+"」\n\n这张图太大啦~\nThis image is too large~")}}for(var a=0;a<this.files.length;a++){var b=this.files[a];var c=new FormData();c.append("smfile",b);$.ajax({url:"https://sm.ms/api/upload",type:"POST",processData:false,contentType:false,data:c,beforeSend:function(d){$(".insert-image-tips").html('<i class="fa fa-spinner rotating" aria-hidden="true"></i>');addComment.createButterbar("上传中...<br>Uploading...")},success:function(f){$(".insert-image-tips").html('<i class="fa fa-check" aria-hidden="true"></i>');setTimeout(function(){$(".insert-image-tips").html('<i class="fa fa-picture-o" aria-hidden="true"></i>')},1000);var d=f.data.url.replace("https://i.loli.net/","https://static.shino.cc/user-upload/");$("#upload-img-show").append('<img class="lazyload upload-image-preview" src="https://cdn.jsdelivr.net/gh/moezx/cdn@3.0.2/img/svg/loader/trans.ajax-spinner-preloader.svg" data-src="'+d+'" onclick="window.open(\''+d+'\')" onerror="imgError(this)" />');lazyload();addComment.createButterbar("图片上传成功~<br>Uploaded successfully~");grin(f.data.url.replace("https://i.loli.net/","{UPLOAD}"),type="Img")},error:function(){$(".insert-image-tips").html('<i class="fa fa-times" aria-hidden="true" style="color:red"></i>');alert("上传失败，请重试.\nUpload failed, please try again.");setTimeout(function(){$(".insert-image-tips").html('<i class="fa fa-picture-o" aria-hidden="true"></i>')},1000)}})}})}function clean_upload_images(){$("#upload-img-show").html("")}function add_upload_tips(){$('<div class="insert-image-tips popup"><i class="fa fa-picture-o" aria-hidden="true"></i><span class="insert-img-popuptext" id="uploadTipPopup">上传图片</span></div><input id="upload-img-file" type="file" accept="image/*" multiple="multiple" class="insert-image-button">').insertAfter($(".form-submit #submit"));attach_image();$("#upload-img-file").hover(function(){$(".insert-image-tips").addClass("insert-image-tips-hover");$("#uploadTipPopup").addClass("show")},function(){$(".insert-image-tips").removeClass("insert-image-tips-hover");$("#uploadTipPopup").removeClass("show")})}function click_to_view_image(){$(".comment_inline_img").click(function(){var a=$(this).attr("src");window.open(a)})}click_to_view_image();function original_emoji_click(){$(".emoji-item").click(function(){grin($(this).text(),type="custom",before="`",after="` ")})}original_emoji_click();function showPopup(b){var a=b.querySelector("#thePopup");a.classList.toggle("show")}function cmt_showPopup(b){var a=$(b).find("#thePopup");a.addClass("show");$(b).find("input").blur(function(){a.removeClass("show")})}function headertop_down(){var a=$("#content").offset().top;$("html,body").animate({scrollTop:a},600)}function scrollBar(){if(document.body.clientWidth>860){$(window).scroll(function(){var g=$(window).scrollTop();var f=$(document).height();var d=$(window).height();var c=parseInt(g/(f-d)*100);$("#bar").css("width",c+"%");if(false){if(c>=0&&c<=19){$("#bar").css("background","#cccccc")}if(c>=20&&c<=39){$("#bar").css("background","#50bcb6")}if(c>=40&&c<=59){$("#bar").css("background","#85c440")}if(c>=60&&c<=79){$("#bar").css("background","#f2b63c")}if(c>=80&&c<=99){$("#bar").css("background","#FF0000")}if(c==100){$("#bar").css("background","#5aaadb")}}else{$("#bar").css("background","orange")}$(".toc-container").css("height",$(".site-content").outerHeight());$(".skin-menu").removeClass("show")})}}scrollBar();"主题切换代码好恶心，有空一定要重构";function checkBgImgCookie(){var a=getCookie("bgImgSetting");if(!a){$("#banner_wave_1").removeClass("banner_wave_hide_fit_skin");$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin")}else{$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin")}if(a!=""){if(a=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/sakura.png"||a=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/plaid.jpg"||a=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/star.png"||a=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/point.png"||a=="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/little-monster.png"){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+a+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura")}else{if(a=="https://api.shino.cc/bing/"){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+a+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura")}else{}}}else{return false}}if(document.body.clientWidth>860){checkBgImgCookie()}function no_right_click(){$(".post-thumb img").bind("contextmenu",function(a){return false})}if(mashiro_global.variables.isNight){$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin-gear, .toc").css("background","none")}$(document).ready(function(){function b(f,d){$(".skin-menu "+f).click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+d+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");c();setCookie("bgImgSetting",d,30)})}function a(f,d){$(".skin-menu "+f).click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","url("+d+")");$(".blank").css("background-color","rgba(255,255,255,1)");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");c();setCookie("bgImgSetting",d,30)})}b("#sakura-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/sakura.png");b("#gribs-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/plaid.jpg");b("#pixiv-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/star.png");b("#KAdots-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/point.png");b("#totem-bg","https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/themebg/little-monster.png");a("#bing-bg","https://api.shino.cc/bing/");$(".skin-menu #white-bg").click(function(){mashiro_global.variables.skinSecter=false;mashiro_global.variables.isNight=false;$("#night-mode-cover").css("visibility","hidden");$("body").css("background-image","none");$(".blank").css("background-color","rgba(255,255,255,.0)");$(".pattern-center-sakura").removeClass("pattern-center-sakura").addClass("pattern-center");$(".headertop-bar-sakura").removeClass("headertop-bar-sakura").addClass("headertop-bar");$("#banner_wave_1").removeClass("banner_wave_hide_fit_skin");$("#banner_wave_2").removeClass("banner_wave_hide_fit_skin");c();setCookie("bgImgSetting","",30)});$(".skin-menu #dark-bg").click(function(){mashiro_global.variables.skinSecter=true;mashiro_global.variables.isNight=true;$("body").css("background-image","url(https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/starry_sky.png)");$(".blank").css("background-color","rgba(255,255,255,.8)");$("#night-mode-cover").css("visibility","visible");$(".pattern-center").removeClass("pattern-center").addClass("pattern-center-sakura");$(".headertop-bar").removeClass("headertop-bar").addClass("headertop-bar-sakura");$("#banner_wave_1").addClass("banner_wave_hide_fit_skin");$("#banner_wave_2").addClass("banner_wave_hide_fit_skin");c()});function c(){$(".skin-menu").removeClass("show");setTimeout(function(){$(".changeSkin-gear").css("visibility","visible")},300);if(mashiro_global.variables.isNight){$(".changeSkin-gear, .toc").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin-gear, .toc").css("background","none")}}$(".changeSkin-gear").click(function(){$(".skin-menu").toggleClass("show");if(mashiro_global.variables.isNight){$(".changeSkin").css("background","rgba(255,255,255,0.8)")}else{$(".changeSkin").css("background","none")}});$(".skin-menu #close-skinMenu").click(function(){c()});add_upload_tips()});function nextBG(){bgindex=bgindex+1;console.log(bg[Math.abs(bgindex%bg.length)]);$(".centerbg").css("background-image",'url("'+bg[Math.abs(bgindex%bg.length)]+'")')}function preBG(){bgindex=bgindex-1;console.log(bg[Math.abs(bgindex%bg.length)]);$(".centerbg").css("background-image",'url("'+bg[Math.abs(bgindex%bg.length)]+'")')}$(document).ready(function(){var a=Math.floor(Math.random()*bg.length);$(".centerbg").css("background-image",'url("'+bg[a]+'")');$("#bg-next").click(function(){nextBG()});$("#bg-pre").click(function(){preBG()})});if(document.body.clientWidth<=860&&!window.is_app){window.onscroll=function(){scrollFunction()};function scrollFunction(){if(document.body.scrollTop>20||document.documentElement.scrollTop>20){document.getElementById("moblieGoTop").style.display="block"}else{document.getElementById("moblieGoTop").style.display="none"}}function topFunction(){document.body.scrollTop=0;document.documentElement.scrollTop=0}}function reload_show_date_time(){BirthDay=new Date("06/02/2017 18:00:00");today=new Date();timeold=(today.getTime()-BirthDay.getTime());sectimeold=timeold/1000;secondsold=Math.floor(sectimeold);msPerDay=24*60*60*1000;e_daysold=timeold/msPerDay;daysold=Math.floor(e_daysold);monitorday.innerHTML=daysold}function timeSeriesReload(a){if(a==true){$("#archives span.al_mon").click(function(){$(this).next().slideToggle(400);return false});lazyload()}else{(function(){$("#al_expand_collapse,#archives span.al_mon").css({cursor:"s-resize"});$("#archives span.al_mon").each(function(){var f=$(this).next().children("li").length;$(this).children("#post-num").text(f)});var d=$("#archives ul.al_post_list"),b=$("#archives ul.al_post_list:first");d.hide(1,function(){b.show()});$("#archives span.al_mon").click(function(){$(this).next().slideToggle(400);return false});if(document.body.clientWidth>860){$("#archives li.al_li").mouseover(function(){$(this).children(".al_post_list").show(400);return false});if(false){$("#archives li.al_li").mouseout(function(){$(this).children(".al_post_list").hide(400);return false})}}var c=0;$("#al_expand_collapse").click(function(){if(c==0){d.show();c++}else{if(c==1){d.hide();c--}}})})()}}timeSeriesReload();$(document).on("click",".sm",function(){var a="您真的要设为私密吗？";if(confirm(a)==true){$(this).commentPrivate()}else{aler("已取消")}});$.fn.commentPrivate=function(){if($(this).hasClass("private_now")){alert("您之前已设过私密评论");return false}else{$(this).addClass("private_now");var d=$(this).data("idp"),c=$(this).data("actionp"),a=$(this).children(".has_set_private");var b={action:"siren_private",p_id:d,p_action:c};$.post("/wp-admin/admin-ajax.php",b,function(f){$(a).html(f)});return false}};function show_date_time(){BirthDay=new Date("2020-02-11 18:00:00");today=new Date();timeold=(today.getTime()-BirthDay.getTime());sectimeold=timeold/1000;secondsold=Math.floor(sectimeold);msPerDay=24*60*60*1000;e_daysold=timeold/msPerDay;daysold=Math.floor(e_daysold);monitorday.innerHTML=daysold}try{show_date_time()}catch(e){}POWERMODE.colorful=true;POWERMODE.shake=false;document.body.addEventListener("input",POWERMODE);function motionSwitch(c){var a=[".bili",".menhera",".tieba"];for(var b in a){$(a[b]+"-bar").removeClass("on-hover");$(a[b]+"-container").css("display","none")}$(c+"-bar").addClass("on-hover");$(c+"-container").css("display","block")}$(".comt-addsmilies").click(function(){$(".comt-smilies").toggle()});$(".comt-smilies a").click(function(){$(this).parent().hide()});function smileBoxToggle(){$(document).ready(function(){$("#emotion-toggle").click(function(){$(".emotion-toggle-off").toggle(0);$(".emotion-toggle-on").toggle(0);$(".emotion-box").toggle(160)})})}smileBoxToggle();function grin(a,f,g,h){var d;if(f=="custom"){a=g+a+h}else{if(f=="Img"){a="[img]"+a+"[/img]"}else{if(f=="Math"){a=" f(x)=∫("+a+")sec²xdx "}else{a=" :"+a+": "}}}if(document.getElementById("comment")&&document.getElementById("comment").type=="textarea"){d=document.getElementById("comment")}else{return false}if(document.selection){d.focus();sel=document.selection.createRange();sel.text=a;d.focus()}else{if(d.selectionStart||d.selectionStart=="0"){var c=d.selectionStart;var b=d.selectionEnd;var i=b;d.value=d.value.substring(0,c)+a+d.value.substring(b,d.value.length);i+=a.length;d.focus();d.selectionStart=i;d.selectionEnd=i}else{d.value+=a;d.focus()}}}function add_copyright(){document.body.addEventListener("copy",function(b){if(!mashiro_global.is_user_logged_in&&window.getSelection().toString().length>30){if(mashiro_option.copyright_enable.indexOf("false")!=-1&&window.getSelection().toString().length>mashiro_option.copyright_minCharNumber){a(b)}}});function a(b){b.preventDefault();var c=""+mashiro_option.copyright_description+"<br>作者："+mashiro_option.author_name+"<br>链接："+window.location.href+"<br>来源："+mashiro_option.site_name+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>");var d=""+mashiro_option.copyright_description+"\n作者："+mashiro_option.author_name+"\n链接："+window.location.href+"\n来源："+mashiro_option.site_name+"\n\n"+window.getSelection().toString().replace(/\r\n/g,"\n");if(b.clipboardData){b.clipboardData.setData("text/html",c);b.clipboardData.setData("text/plain",d);addComment.createButterbar("复制成功！<br>Copied to clipboard successfully!",1000)}else{if(window.clipboardData){return window.clipboardData.setData("text",d)}}}}add_copyright();$(function(){inlojv_js_getqqinfo()});function inlojv_js_getqqinfo(){var b=false;var c=/^[0-9]+$/;if(!getCookie("user_qq")&&!getCookie("user_qq_email")&&!getCookie("user_author")){$("input#qq,input#author,input#email,input#url").val("")}if(getCookie("user_avatar")&&getCookie("user_qq")&&getCookie("user_qq_email")){$("div.comment-user-avatar img").attr("src",getCookie("user_avatar"));$("input#author").val(getCookie("user_author"));$("input#email").val(getCookie("user_qq")+"@qq.com");$("input#qq").val(getCookie("user_qq"));if(mashiro_option.qzone_autocomplete){$("input#url").val("https://user.qzone.qq.com/"+getCookie("user_qq"))}if($("input#qq").val()){$(".qq-check").css("display","block");$(".gravatar-check").css("display","none")}}var a=$("input#email").val();$("input#author").on("blur",function(){var d=$("input#author").val();$.ajax({type:"get",url:mashiro_option.qq_api_url+"?type=getqqnickname&qq="+d,dataType:"jsonp",jsonp:"callback",jsonpCallback:"portraitCallBack",success:function(f){$("input#author").val(f[d][6]);$("input#email").val($.trim(d)+"@qq.com");if(mashiro_option.qzone_autocomplete){$("input#url").val("https://user.qzone.qq.com/"+$.trim(d))}$("div.comment-user-avatar img").attr("src","https://q2.qlogo.cn/headimg_dl?dst_uin="+d+"&spec=100");b=true;$("input#qq").val($.trim(d));if($("input#qq").val()){$(".qq-check").css("display","block");$(".gravatar-check").css("display","none")}setCookie("user_author",f[d][6],30);setCookie("user_qq",d,30);setCookie("is_user_qq","yes",30);setCookie("user_qq_email",d+"@qq.com",30);setCookie("user_email",d+"@qq.com",30);a=$("input#email").val()},error:function(){if(c.test(d)){addComment.createButterbar("QQ号不存在（建议不要使用纯数字昵称）")}$("input#qq").val("");$(".qq-check").css("display","none");$(".gravatar-check").css("display","block");$("div.comment-user-avatar img").attr("src",get_gravatar($("input#email").val(),80));setCookie("user_qq","",30);setCookie("user_email",$("input#email").val(),30);setCookie("user_avatar",get_gravatar($("input#email").val(),80),30)}});$.ajax({type:"get",url:mashiro_option.qq_avatar_api_url+"?type=getqqavatar&qq="+d,dataType:"jsonp",jsonp:"callback",jsonpCallback:"qqavatarCallBack",beforeSend:function(){if(c.test(d)){addComment.createButterbar("正在获取QQ头像...")}},success:function(f){$("div.comment-user-avatar img").attr("src",f[d]);addComment.createButterbar("QQ头像获取成功");setCookie("user_avatar",f[d],30)},error:function(){if(c.test(d)){addComment.createButterbar("QQ号不存在（建议不要使用纯数字昵称）")}$("input#qq","input#email","input#url").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block");setCookie("user_qq","",30);$("div.comment-user-avatar img").attr("src",get_gravatar($("input#email").val(),80));setCookie("user_avatar",get_gravatar($("input#email").val(),80),30)}}})});if(getCookie("user_avatar")&&getCookie("user_email")&&getCookie("is_user_qq")=="no"&&!getCookie("user_qq_email")){$("div.comment-user-avatar img").attr("src",getCookie("user_avatar"));$("input#email").val(getCookie("user_email"));$("input#qq").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block")}}$("input#email").on("blur",function(){var d=$("input#email").val();if(b==false||a!=d){$("div.comment-user-avatar img").attr("src",get_gravatar(d,80));setCookie("user_avatar",get_gravatar(d,80),30);setCookie("user_email",d,30);setCookie("user_qq_email","",30);setCookie("is_user_qq","no",30);$("input#qq").val("");if(!$("input#qq").val()){$(".qq-check").css("display","none");$(".gravatar-check").css("display","block")}}});if(getCookie("user_url")){$("input#url").val(getCookie("user_url"))}$("input#url").on("blur",function(){var d=$("input#url").val();$("input#url").val(d);setCookie("user_url",d,30)});if(getCookie("user_author")){$("input#author").val(getCookie("user_author"))}$("input#author").on("blur",function(){var d=$("input#author").val();$("input#author").val(d);setCookie("user_author",d,30)})}function get_poem(f,d){var a=document.querySelector(f);var b=document.querySelector(d);var c=new XMLHttpRequest();c.open("get","https://v2.jinrishici.com/one.json");c.withCredentials=true;c.onreadystatechange=function(){if(c.readyState===4){var g=JSON.parse(c.responseText);a.innerHTML=g.data.content;b.innerHTML="【"+g.data.origin.dynasty+"】"+g.data.origin.author+"《"+g.data.origin.title+"》"}};c.send()}function mail_me(){var a="mailto:"+mashiro_option.email_name+"@"+mashiro_option.email_domain;window.open(a)}function hearthstone_deck_iframe(){if($("iframe").hasClass("hearthstone-deck")){$(".hearthstone-deck").each(function(){$(this).attr("height",$(this).width()*5/9+"px")});$(".hearthstone-deck-container").each(function(){var a=$(this).width()*5/9+14;$(this).css("height",a+"px")})}}var currentFontIsUbuntu=true;mashiro_global.ini.normalize();var home=location.href,s=$("#bgvideo")[0],Siren={BSZ:function(){$.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js")},TOC:function(){if($(".toc").length>0&&document.body.clientWidth>1200){if($(".pattern-center").length>0){tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:true,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-400,scrollSmoothOffset:-85})}else{tocbot.init({tocSelector:".toc",contentSelector:".entry-content",scrollSmooth:true,headingSelector:"h1, h2, h3, h4, h5",headingsOffset:-85,scrollSmoothOffset:-85})}var a=$(".toc").offset().top-135;window.onscroll=function(){var b=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;if(b>=a){$(".toc").addClass("toc-fixed")}else{$(".toc").removeClass("toc-fixed")}};$.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js")}},AB:function(){if(window.location.pathname.indexOf("about")>-1){$.getScript("/js/botui.js",function(){if(typeof(botui)==undefined&&!botui.message){bot_ui_ini()}})}},VA:function(){if(!a){var a=new Valine();a.init({el:"#vcomments",appId:mashiro_option.v_appId,appKey:mashiro_option.v_appKey,comment_count:true,path:window.location.pathname,placeholder:"祝开开心心！",avatar:"monsterid"})}},MJ:function(){if(mashiro_option.mathjax=="1"){$.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML",function(){MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});var a=document.getElementsByClassName("entry-content")[0];MathJax.Hub.Queue(["Typeset",MathJax.Hub,a])})}},MN:function(){$(".iconflat").on("click",function(){if($("#main-container").hasClass("open")){$(".iconflat").css("width","50px").css("height","50px");$(".openNav").css("height","50px")}else{$(".iconflat").css("width","100%").css("height","100%");$(".openNav").css("height","100%")}$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")})},MNH:function(){if($("body").hasClass("navOpen")){$("body").toggleClass("navOpen");$("#main-container,#mo-nav,.openNav").toggleClass("open")}},splay:function(){$("#video-btn").addClass("video-pause").removeClass("video-play").show();$(".video-stu").css({bottom:"-100px"});$(".focusinfo").css({top:"-999px"});$("#banner_wave_1").addClass("banner_wave_hide");$("#banner_wave_2").addClass("banner_wave_hide");s.play()},spause:function(){$("#video-btn").addClass("video-play").removeClass("video-pause");$(".focusinfo").css({top:"49.3%"});$("#banner_wave_1").removeClass("banner_wave_hide");$("#banner_wave_2").removeClass("banner_wave_hide");s.pause()},liveplay:function(){if(s.oncanplay!=undefined&&$(".haslive").length>0){if($(".videolive").length>0){Siren.splay()}}},livepause:function(){if(s.oncanplay!=undefined&&$(".haslive").length>0){Siren.spause();$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")}},addsource:function(){$(".video-stu").html("正在载入视频 ...").css({bottom:"0px"});var a=Poi.movies.name.split(","),b=a[Math.floor(Math.random()*a.length)];$("#bgvideo").attr("src",Poi.movies.url+"/"+b);$("#bgvideo").attr("video-name",b)},LV:function(){var a=$("#video-btn");a.on("click",function(){if($(this).hasClass("loadvideo")){$(this).addClass("video-pause").removeClass("loadvideo").hide();Siren.addsource();s.oncanplay=function(){Siren.splay();$("#video-add").show();a.addClass("videolive");a.addClass("haslive")}}else{if($(this).hasClass("video-pause")){Siren.spause();a.removeClass("videolive");$(".video-stu").css({bottom:"0px"}).html("已暂停 ...")}else{Siren.splay();a.addClass("videolive")}}s.onended=function(){$("#bgvideo").attr("src","");$("#video-add").hide();a.addClass("loadvideo").removeClass("video-pause");a.removeClass("videolive");a.removeClass("haslive");$(".focusinfo").css({top:"49.3%"})}});$("#video-add").on("click",function(){Siren.addsource()})},AH:function(){if(Poi.windowheight=="auto"){if($("h1.main-title").length>0){var a=$(window).height();$("#centerbg").css({height:a});$("#bgvideo").css({"min-height":a});$(window).resize(function(){Siren.AH()})}}else{$(".headertop").addClass("headertop-bar")}},PE:function(){if($(".headertop").length>0){if($("h1.main-title").length>0){$(".blank").css({"padding-top":"0px"});$(".headertop").css({height:"auto"}).show();if(Poi.movies.live=="open"){Siren.liveplay()}$(".site-header").addClass("is-homepage")}else{$(".blank").css({"padding-top":"75px"});$(".headertop").css({height:"0px"}).hide();Siren.livepause()}}},CE:function(){$(".comments-hidden").show();$(".comments-main").hide();$(".comments-hidden").click(function(){$(".comments-main").slideDown(500);$(".comments-hidden").hide()});$(".archives").hide();$(".archives:first").show();$("#archives-temp h3").click(function(){$(this).next().slideToggle("fast");return false});$(".js-toggle-search").on("click",function(){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")});$(".ins-search-mask").on("click",function(a){if($(a.target).closest(".js-toggle-search").length>0){}else{if($(".ins-search").hasClass("show")){$(".ins-search").toggleClass("show")}}});$(".search_close").on("click",function(){if($(".js-search").hasClass("is-visible")){$(".js-toggle-search").toggleClass("is-active");$(".js-search").toggleClass("is-visible")}});$("#show-nav").on("click",function(){if($("#show-nav").hasClass("showNav")){$("#show-nav").removeClass("showNav").addClass("hideNav");$(".site-top .lower nav").addClass("navbar");$(".mobile-fit-control").removeClass("hide");if(screen&&screen.width<=1200){$(".site-title").toggle()}}else{$("#show-nav").removeClass("hideNav").addClass("showNav");$(".site-top .lower nav").removeClass("navbar");$(".mobile-fit-control").addClass("hide");if(screen&&screen.width<=1200){$(".site-title").toggle()}}});$("#loading").click(function(){$("#loading").fadeOut(500)})},NH:function(){var c=0,a=50,b=$(document).scrollTop();$(window).scroll(function(){var d=$(document).scrollTop();if(d==c){$(".site-header").removeClass("yya")}if(d>c){$(".site-header").addClass("yya")}if(d>a){$(".site-header").addClass("gizle");if(d>b){$(".site-header").removeClass("sabit")}else{$(".site-header").addClass("sabit")}b=d}})},XLS:function(){$body=(window.opera)?(document.compatMode=="CSS1Compat"?$("html"):$("body")):$("html,body");$("body").on("click","#pagination a",function(){$(this).addClass("loading").text("");$.ajax({type:"GET",url:$(this).attr("href")+"#main",success:function(a){result=$(a).find("#main .post");nextHref=$(a).find("#pagination a").attr("href");$("#main").append(result.fadeIn(500));$("#pagination a").removeClass("loading").text("Previous");lazyload();mashiro_global.post_list_show_animation.ini(50);if(nextHref!=undefined){$("#pagination a").attr("href",nextHref)}else{$("#pagination").html("<span>很高兴你翻到这里，但是真的没有了...</span>")}}});return false})},XCS:function(){var c=jQuery("#cancel-comment-reply-link"),b=c.text(),a="commentwrap";jQuery(document).on("submit","#commentform",function(){jQuery.ajax({url:Poi.ajaxurl,data:jQuery(this).serialize()+"&action=ajax_comment",type:jQuery(this).attr("method"),beforeSend:addComment.createButterbar("提交中(Commiting)...."),error:function(f){var d=addComment;d.createButterbar(f.responseText)},success:function(j){jQuery("textarea").each(function(){this.value=""});var g=addComment,i=g.I("cancel-comment-reply-link"),d=g.I("wp-temp-form-div"),k=g.I(g.respondId),f=g.I("comment_post_ID").value,h=g.I("comment_parent").value;if(h!="0"){jQuery("#respond").before('<ol class="children">'+j+"</ol>")}else{if(!jQuery("."+a).length){if(Poi.formpostion=="bottom"){jQuery("#respond").before('<ol class="'+a+'">'+j+"</ol>")}else{jQuery("#respond").after('<ol class="'+a+'">'+j+"</ol>")}}else{if(Poi.order=="asc"){jQuery("."+a).append(j)}else{jQuery("."+a).prepend(j)}}}g.createButterbar("提交成功(Succeed)");lazyload();code_highlight_style();click_to_view_image();clean_upload_images();i.style.display="none";i.onclick=null;g.I("comment_parent").value="0";if(d&&k){d.parentNode.insertBefore(k,d);d.parentNode.removeChild(d)}}});return false});addComment={moveForm:function(g,h,k){var o=this,d,j=o.I(g),f=o.I(k),n=o.I("cancel-comment-reply-link"),l=o.I("comment_parent"),m=o.I("comment_post_ID");c.text(b);o.respondId=k;if(!o.I("wp-temp-form-div")){d=document.createElement("div");d.id="wp-temp-form-div";d.style.display="none";f.parentNode.insertBefore(d,f)}!j?(temp=o.I("wp-temp-form-div"),o.I("comment_parent").value="0",temp.parentNode.insertBefore(f,temp),temp.parentNode.removeChild(temp)):j.parentNode.insertBefore(f,j.nextSibling);jQuery("body").animate({scrollTop:jQuery("#respond").offset().top-180},400);l.value=h;n.style.display="";n.onclick=function(){var q=addComment,p=q.I("wp-temp-form-div"),r=q.I(q.respondId);q.I("comment_parent").value="0";if(p&&r){p.parentNode.insertBefore(r,p);p.parentNode.removeChild(p)}this.style.display="none";this.onclick=null;return false};try{o.I("comment").focus()}catch(i){}return false},I:function(d){return document.getElementById(d)},clearButterbar:function(d){if(jQuery(".butterBar").length>0){jQuery(".butterBar").remove()}},createButterbar:function(g,f){var d=this;d.clearButterbar();jQuery("body").append('<div class="butterBar butterBar--center"><p class="butterBar-message">'+g+"</p></div>");if(f>0){setTimeout("jQuery('.butterBar').remove()",f)}else{setTimeout("jQuery('.butterBar').remove()",6000)}}}},XCP:function(){$body=(window.opera)?(document.compatMode=="CSS1Compat"?$("html"):$("body")):$("html,body");$("body").on("click","#comments-navi a",function(a){a.preventDefault();$.ajax({type:"GET",url:$(this).attr("href"),beforeSend:function(){$("#comments-navi").remove();$("ul.commentwrap").remove();$("#loading-comments").slideDown();$body.animate({scrollTop:$("#comments-list-title").offset().top-65},800)},dataType:"html",success:function(b){result=$(b).find("ul.commentwrap");nextlink=$(b).find("#comments-navi");$("#loading-comments").slideUp("fast");$("#loading-comments").after(result.fadeIn(500));$("ul.commentwrap").after(nextlink);lazyload();code_highlight_style();click_to_view_image()}})})},IA:function(){POWERMODE.colorful=true;POWERMODE.shake=false;document.body.addEventListener("input",POWERMODE)},GT:function(){var b=100,d=1200,a=700,c=$(".cd-top");$(window).scroll(function(){if($(this).scrollTop()>b){c.addClass("cd-is-visible");$(".changeSkin-gear").css("bottom","0");if($(window).height()>950){$(".cd-top.cd-is-visible").css("top","0")}else{$(".cd-top.cd-is-visible").css("top",($(window).height()-950)+"px")}}else{$(".changeSkin-gear").css("bottom","-999px");$(".cd-top.cd-is-visible").css("top","-900px");c.removeClass("cd-is-visible cd-fade-out")}if($(this).scrollTop()>d){c.addClass("cd-fade-out")}});c.on("click",function(f){f.preventDefault();$("body,html").animate({scrollTop:0},a)})}};$(function(){Siren.AH();Siren.PE();Siren.NH();Siren.GT();Siren.XLS();Siren.XCS();Siren.XCP();Siren.CE();Siren.MN();Siren.IA();Siren.LV();if(window.is_app){injectStyles("#nprogress .bar { display: none; }")}$.fn.postLike=function(){if($(this).hasClass("done")){return false}else{$(this).addClass("done");var d=$(this).data("id"),c=$(this).data("action"),b=$(this).children(".count");var a={action:"specs_zan",um_id:d,um_action:c};$.post(Poi.ajaxurl,a,function(f){$(b).html(f)});return false}};$(document).on("click",".specsZan",function(){$(this).postLike()});console.log("%c Mashiro %c","background:#24272A; color:#ffffff","","https://2heng.xin/");console.log("%c hojun %c","background:#24272A; color:#ffffff","","https://www.hojun.cn/");console.log("%c OrangeSummer %c","background:#24272A; color:#ffffff","","https://www.orangesummerr.com/")});var isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,isOpera=navigator.userAgent.toLowerCase().indexOf("opera")>-1,isIe=navigator.userAgent.toLowerCase().indexOf("msie")>-1;if((isWebkit||isOpera||isIe)&&document.getElementById&&window.addEventListener){window.addEventListener("hashchange",function(){var b=location.hash.substring(1),a;if(!(/^[A-z0-9_-]+$/.test(b))){return}a=document.getElementById(b);if(a){if(!(/^(?:a|select|input|button|textarea)$/i.test(a.tagName))){a.tabIndex=-1}a.focus()}},false)}function render(c,b){var a=/(\\)?\{([^\{\}\\]+)(\\)?\}/g;return c.replace(a,function(d,h,j,g){if(h||g){return d.replace("\\","")}var n=j.replace(/\s/g,"").split(".");var m=b;var l,f,k;for(l=0,f=n.length;l<f;++l){k=n[l];m=m[k];if(m===undefined||m===null){return""}}return m})}String.prototype.render=function(a){return render(this,a)};$(document).ready(function(){setTimeout(function(){isFirstLoad=true;if(document.body.clientWidth>860){$(".changeSkin-gear").css("visibility","visible")}$("p").remove(".head-copyright")},0)});